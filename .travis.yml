branches:
  only:
  - master
language: node_js
node_js:
- '15.3'
sudo: required
cache:
  npm: true
before-script:
- npm add grunt
- npm add grunt-cli
- npm add typescript
- npm add grunt-ts
- npm install
script:
- grunt --gruntfile Gruntfile.cjs l4w-build-pipeline
after_success:
- bash post_build.sh
# Encrypted GitHub access token for Travis-CI.com, can be generated with:
#   travis login --github-token <token1>
#   travis encrypt --pro GH_TOKEN=<token2>
# Two GitHub tokens are used:
#  - token1: login token
#      Permissions: repo, read:org, user:email
#      https://docs.travis-ci.com/user/github-oauth-scopes/#repositories-on-httpstravis-cicom-private-and-public
#  - token2: build token used by Travis to run post_build.sh, which push build output to branch "deploy"
#      Permissions: repo:status, repo_deployment, public_repo, read:org, write:repo_hook, user:email 
env:
  global:
  - secure: gkys4bq7inuzP1Fyw86avPMe6a5hZ8uLpSJK9r6A5IPDWtSKq0JB2RqUPjz6N9/I5uazihxBioIo8dKD3ecfl+U1HsNs8dGzPs+l3VcORH2w0CzR0QlpWEuNqngW3SCU5BOeiVaMUpj0O7EmL/sDWdPGPIndV1TOxw3HwVjE1ZhXzhoBrGXdiKXl3vpCXyeg3K8WIYU3M6ra0+i3rYwOXQc2DBM6+SNscuz7mbDn32DnSrgC/tKX4+/iux8lCveu4upK2slQs7fHtnPS1nNpu7DXUvJ6B9KLzQo1rbpPSBIA11CGRXWCxt8ddDmblSqJ04gm0Sc+8U+2EqkTVVwoMZsoGJbSNwRrRy0m6AfaUkBzgnAPTTeL8oJhsyChOiMGYcW88YTNTmVQxsSdeiRIvTYnSq56lNOdtS8UvJ1ojrTTERYVNY6Vzw1iEUr6bwQoFpMBiQGtbJEM1XW7QtvDYUuUZlwe9ggrra0GZFUP/7YYQpzHIGsJlNX9bmEkFGKoXrSEaJqRzW+27GLduJ4YiW/0SFgGzKtNCV6D/9/JfXiEQrV9HRuzsI8KVN65XoReW1WwrRNKhZU7XTBQ5x+uSg3WrHw/8vtmrbLemTE3VxhSdiH/QixrZ1a3fO24TsQ0VoqlR6BV2U4xCgk1NBb+BLMN5PO3fFsDTXiy1AqebM4=
notifications:
  email: false
